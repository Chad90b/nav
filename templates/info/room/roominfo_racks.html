{% block base_header_additional_head %}
  <link href="{{ STATIC_URL }}css/nav/rack.css" rel="stylesheet">
  <script>
    require(["src/info_room_rack"]);
    NAV.urls.render_add_sensor = "{% url 'room-info-racks-add-sensor' room.pk %}"
    NAV.urls.remove_sensor = "{% url 'room-info-racks-remove-sensor' room.pk %}"
  </script>
{% endblock %}

<h3>Environment sensors in racks in {{ room.pk }}</h3>

{% if not racks %}
  <p class="alert-box">There are no racks in this room.</p>
{% endif %}


{# Modal for adding new rack #}
<div id="rackmodal" class="reveal-modal tiny" data-reveal role="dialog">
  <h3>Add new rack</h3>
  <form action="{% url 'room-info-racks-add-rack' room.pk %}" method="post">
    <input type="hidden" name="roomid" value="{{ room.pk }}">
    <label>
      Rack name
      <input type="text" name="rackname">
    </label>
    <input type="submit" class="button small" value="Add new rack">
  </form>
</div>


{# Modal for adding new sensor #}
<div id="sensormodal" class="reveal-modal tiny" data-reveal role="dialog"></div>


<div id="racks-container">
  {% for rack in racks %}
    {% include 'info/room/fragment_rack.html' %}
  {% endfor %}

  <div id="add-rack-button-container">
    <h4>&nbsp;</h4>
    <a class="button small" data-reveal-id="rackmodal">Add a rack</a>
  </div>

</div>
